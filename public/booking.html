<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Office Seat Tracker</title>
  
  <!-- External CSS - Fixed paths (changed from ../css/ to /css/) -->
  <link rel="stylesheet" href="../css/shared.css">
  <link rel="stylesheet" href="../css/booking.css">
</head>
<body>
<div class="container">
  <div class="header">
    <div class="title-wrap">
      <svg class="brand-icon" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs><linearGradient id="g1" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#667eea"/><stop offset="100%" stop-color="#764ba2"/></linearGradient></defs>
        <rect x="6" y="16" width="16" height="36" rx="3" fill="url(#g1)"/>
        <rect x="24" y="12" width="16" height="40" rx="3" fill="#94a3b8"/>
        <rect x="42" y="20" width="16" height="32" rx="3" fill="#cbd5e1"/>
        <rect x="10" y="20" width="8" height="6" fill="#fff"/><rect x="10" y="30" width="8" height="6" fill="#fff"/>
        <rect x="28" y="16" width="8" height="6" fill="#fff"/><rect x="28" y="26" width="8" height="6" fill="#fff"/>
        <rect x="28" y="36" width="8" height="6" fill="#fff"/><rect x="46" y="24" width="8" height="6" fill="#fff"/>
        <rect x="46" y="34" width="8" height="6" fill="#fff"/>
        <rect x="6" y="52" width="52" height="2" fill="#e5e7eb"/>
      </svg>
      <h1 class="app-title">Office Seat Tracker</h1>
    </div>
    <div class="right-tools">
      <div class="profile-chip" id="profileChip" style="display:none;"></div>
      <div class="sync-status" id="syncStatus">ğŸŸ¢ Firebase Live</div>
    </div>
  </div>

  <p class="subtitle" id="subtitle">Enter your access code to start booking seats.</p>

  <div class="mode-indicator" id="modeIndicator">
    <strong>ğŸ“… Selection Mode:</strong> Click on the days you want to book. Your selections are highlighted in blue.
  </div>

  <div class="user-input" id="loginSection">
    <div style="max-width: 500px; margin: 0 auto; width: 100%;">
      <div style="text-align: center; margin-bottom: 24px;">
        <h2 style="font-size: 24px; font-weight: 700; color: #1e293b; margin-bottom: 8px;">
          Enter Your Access Code
        </h2>
        <p style="color: #64748b; font-size: 14px;">
          Get your access code from your office admin
        </p>
      </div>

      <!-- Google Workspace SSO Section -->
      <div class="google-sso-section" style="margin-bottom: 24px;">
        <button class="google-signin-btn" id="googleSignInBtn" type="button">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google" style="width: 24px; height: 24px;">
          <span>Continue with Google Workspace</span>
        </button>
        <p style="text-align: center; margin-top: 8px; font-size: 13px; color: #64748b;">
          For employees using company email
        </p>
      </div>

      <!-- Divider -->
      <div class="divider" style="text-align: center; margin: 24px 0; position: relative;">
        <div style="position: absolute; top: 50%; left: 0; right: 0; height: 1px; background: #e2e8f0;"></div>
        <span style="background: white; padding: 0 16px; position: relative; color: #64748b; font-size: 14px; font-weight: 600;">OR</span>
      </div>

      <div style="margin-bottom: 16px;">
        <label style="display: block; font-weight: 600; color: #334155; margin-bottom: 8px; font-size: 14px;">
          Access Code
        </label>
        <input 
          type="text" 
          id="accessCodeInput" 
          placeholder="e.g. ABC123"
          maxlength="8"
          style="width: 100%; padding: 14px 16px; font-size: 16px; border: 2px solid #e2e8f0; border-radius: 12px; font-family: 'Monaco', 'Courier New', monospace; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; transition: all 0.2s; box-sizing: border-box;"
          onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 4px rgba(102,126,234,0.1)'"
          onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'"
        >
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; font-weight: 600; color: #334155; margin-bottom: 8px; font-size: 14px;">
          Your Name
        </label>
        <input 
          type="text" 
          id="userName" 
          placeholder="Enter your name"
          style="width: 100%; padding: 14px 16px; font-size: 16px; border: 2px solid #e2e8f0; border-radius: 12px; transition: all 0.2s; box-sizing: border-box;"
          onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 4px rgba(102,126,234,0.1)'"
          onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'"
        >
      </div>

      <button 
        onclick="handleLogin()" 
        id="loginBtn"
        style="width: 100%; padding: 16px; background: #667eea; color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.2s;"
        onmouseover="this.style.background='#5568d3'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 25px rgba(102,126,234,0.3)'"
        onmouseout="this.style.background='#667eea'; this.style.transform='none'; this.style.boxShadow='none'"
      >
        Continue â†’
      </button>

      <div id="errorMessage" style="margin-top: 16px; padding: 12px; background: #fee2e2; border: 1px solid #fca5a5; border-radius: 8px; color: #991b1b; display: none; font-weight: 600; font-size: 14px;">
      </div>
    </div>
  </div>

  <div class="logged-in-header" id="loggedInSection" style="display:none;">
    <div class="company-info">
      <h2 id="companyNameDisplay" class="company-name"></h2>
      <div class="action-buttons">
        <button onclick="toggleSelectMode()" id="actionBtnLoggedIn">Select Days</button>
        <button class="secondary logout-btn" onclick="clearProfile()">Logout</button>
      </div>
    </div>
  </div>

  <!-- Location Switcher (shown only for multi-location users) -->
  <div class="location-switcher-bar" id="locationSwitcherBar" style="display: none;">
    <div class="location-switcher-content">
      <div class="switcher-label">
        <span class="switcher-icon">ğŸ“</span>
        <span class="switcher-text">Current Location:</span>
      </div>
      <select class="location-dropdown" id="locationDropdown">
        <option value="">Loading locations...</option>
      </select>
    </div>
  </div>

  <div class="view-controls">
    <button class="view-btn active" id="weekBtn" onclick="setViewMode('week')">ğŸ“… Week View</button>
    <button class="view-btn" id="monthBtn" onclick="setViewMode('month')">ğŸ—“ï¸ Month View</button>
  </div>

  <div class="week-container" id="weekContainer"></div>

  <div class="legend">
    <div class="legend-item"><div class="legend-dot" style="background:#22c55e;"></div><span>Available (0â€“60% capacity)</span></div>
    <div class="legend-item"><div class="legend-dot" style="background:#f59e0b;"></div><span>Getting Full (â‰¥70% capacity)</span></div>
    <div class="legend-item"><div class="legend-dot" style="background:#ef4444;"></div><span>Full (at capacity)</span></div>
  </div>
</div>

<div class="modal-overlay" id="attendeesModal" onclick="closeModal(event)">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modal-header">
      <h3 class="modal-title" id="modalTitle">Attendees</h3>
      <button class="modal-close" onclick="closeModal()">&times;</button>
    </div>
    <div class="modal-attendees" id="modalAttendees"></div>
  </div>
</div>


<!-- External JavaScript - Fixed path (changed from ../js/ to /js/) -->
<script type="module" src="../js/booking.js"></script>
</body>
</html>